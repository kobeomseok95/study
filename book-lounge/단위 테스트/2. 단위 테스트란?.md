```toc
```

# 2. 1 단위 테스트의 정의
---
- 작은 코드 조각을 검증한다.
- 빠르게 수행한다.
- 격리된 방식으로 처리하는 자동화된 테스트다. (고전파 vs 런던파 언급)

## 2. 1. 1 격리 문제에 대한 런던파의 접근
---
런던파는 하나의 클래스가 다른 클래스 또는 여러 클래스에 의존하면 이 모든 의존성을 테스트 대역으로 대체해야 한다. 이런 방식으로 동작을 외부 영향과 분리하여 테스트 대상 클래스에만 집중할 수 있다.

이 접근 방식은 아래와 같은 장점이 있다.
1. 테스트 실패 시 어느 부분이 고장났는지 확실히 알 수 있다.
	1. 외부 시스템을 테스트 대역으로 대체했기 때문에 테스트 대상에 어느 부분이 에러가 났는지 쉽게 알 수 있다.
2. 객체 그래프를 분할할 수 있다.
	1. 객체 그래프를 테스트 대역으로 대체하여 테스트 대상에 집중할 수 있도록 하기 때문이다.
	2. 또한 테스트를 위한 준비 과정을 크게 줄일 수 있다.
3. 부가적인 장점으로 하나의 클래스에 해당하는 하나의 테스트 클래스를 생성한다.

## 2. 1. 2 격리 문제에 대한 고전파의 접근
---
고전파는 코드를 꼭 격리하는 방식으로 테스트해야 하는 것은 아니지만, 단위 테스트는 서로 격리해서 실행해야 한다. 이렇게 하면 서로의 결과에 영향을 미치지 않는다.

즉, 여러 클래스를 한 번에 테스트해도 괜찮다는 접근 방식이며 이를 통해 실행 컨텍스트에 영향을 줄 수 있다. 대표적으로 데이터베이스, 파일 시스템과 같은 외부 의존성이다.

> 공유 의존성, 비공개 의존성, 프로세스 외부 의존성
> 
> 공유 의존성이란 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성. 대표적으로 정적 가변 필드(static mutable field)가 있다.
> 
> 비공개 의존성이란 공유하지 않는 의존성이다.
> 
> 프로세스 외부 의존성이란 애플리케이션 실행 프로세스 외부에서 실행되는 의존성이다. 예를 들어 데이터베이스는 공유 의존성이면서 프로세스 외부 의존성이지만, 테스트 실행 전 도커 컨테이너로 데이터베이스를 시작하면 테스트가 더 이상 동일한 인스턴스로 작동하지 않기 때문에 프로세스 외부이면서 공유하지 않는 의존성이 된다. 즉, 운영 DB가 아닌 별도의 DB 인스턴스를 의미하며 결과에 서로 영향을 미치지 않는다.

공유 의존성은 테스트 대상 클래스 간이 아닌, 단위 테스트 간 공유한다. 싱글톤 의존성은 각 테스트에서 새 인스턴스를 만들 수 있기만 하면 공유되지 않는다.

생성자 등을 통해 다른 모든 의존성이 SUT에 주입되면 각 테스트에서 새 인스턴스를 만들 수 있다. 테스트 스위트 전체에서 단일 인스턴스를 유지할 필요는 없다.

공유 의존성을 대체하는 또 다른 이유는 테스트 실행 속도를 높이는 데 있다. 

공유 의존성을 가진 테스트는 단위 테스트가 아닌 통합 테스트 영역으로 넘어간다.

공유 의존성이 없는 한 여러 클래스를 묶어 단위 테스트할 수도 있다.

# 2. 2 단위 테스트의 런던파와 고전파
---



