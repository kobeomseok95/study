```toc
```
# 3. 1 단위 테스트 구성 방법
---
## 3. 1. 1 AAA 패턴
---
AAA 패턴은 arrange, act, assert 의 앞 세글자를 따서 AAA 패턴이라고 한다. 

- 준비 구절에서는 테스트 대상 시스템 (System Under Test)와 해당 의존성을 원하는 상태로 만든다.
- 실행 구절에서는 SUT에서 테스트할 메서드를 호출하고, 준비된 의존성을 전달하며 출력값을 캡쳐한다.
- 검증 구절에서는 반환값, SUT와 협력자의 최종 상태, SUT가 호출한 협력자의 메서드를 검증한다.

TDD로 개발할 때는 기능을 작성하기 전 실패할 테스트를 작성할 때, 기능이 어떻게 동작할 지 알지 못한다.   따라서 기대하는 동작으로 윤곽을 잡은 다음, 기대에 부응하기 위한 시스템을 어떻게 개발할지 아는 것이 좋다.

## 3. 1. 2 여러 개의 준비, 실행, 검증 구절 피하기
---
검증 혹은 준비 구절로 구분된 여러개의 실행 구절을 보면, 여러 개의 동작 단위를 검증하는 테스트를 뜻한다. 실행이 하나면 테스트가 단위 테스트 범주에 있게끔 보장하고, 간단하고, 빠르며, 이해하기 쉽다.

일련의 실행과 검증이 포함된 테스트를 보면 리팩토링 후 각 동작을 고유 테스트로 도출하자. 즉, 실행 / 검증이 반복된다면 이를 하나의 메서드로 추출 후 단위 테스트 코드에는 실행 구절만 변하도록 작성하자.

통합 테스트를 제외하고는 단위 테스트를 포함한 충분히 빠른 테스트에서는 하나의 테스트에 여러 준비 / 실행 / 검증을 작성하지 말고 여러 개의 테스트로 나누는 것이 좋다.

## 3. 1. 3 테스트 내 if 피하기
---
테스트에 분기가 있어 얻는 이점은 없다. 또한 하나의 테스트에 너무 많은 내용을 담고 있는 것이기도 하므로 if 절이 있다면 여러 테스트로 나누자.

## 3. 1. 4 각 구절은 얼마나 커야하는가?
---
### 준비 구절이 가장 큰 경우
일반적으로 준비 구절이 가장 크다. 만약, 실행 + 검증보다 크기가 훨씬 크다면 같은 테스트 클래스 내 비공개 메서드 또는 별도의 팩토리 클래스로 도출하는 것이 좋다. 준비 구절에서 코드 재사용에 도움이 되는 두 가지 패턴으로 오브젝트 마더와 테스트 데이터 빌더가 있다.

### 실행 구절이 한 줄 이상인 경우를 경계하기










































